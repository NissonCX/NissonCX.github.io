// ===========================================
// 代码高亮样式 - Syntax Highlighting
// ===========================================

// 行内代码
code {
  font-family: $font-mono;
  font-size: 0.9em;
  padding: 2px 6px;
  background-color: var(--bg-secondary);
  border-radius: $border-radius-sm;
  color: var(--primary);
}

// 代码块
pre {
  font-family: $font-mono;
  font-size: $font-size-sm;
  line-height: 1.5;
  background-color: var(--bg-secondary);
  border-radius: $border-radius-md;
  padding: $spacing-lg;
  overflow-x: auto;
  margin-bottom: $spacing-lg;

  code {
    padding: 0;
    background: none;
    color: inherit;
    font-size: inherit;
  }
}

// Rouge 语法高亮主题 (基于 One Dark)
.highlight {
  background-color: var(--bg-secondary);
  border-radius: $border-radius-md;
  margin-bottom: $spacing-lg;

  pre {
    margin: 0;
    background: transparent;
  }

  // 浅色模式颜色
  .c, .c1, .cm { color: #6a737d; } // 注释
  .k, .kd, .kn, .kp, .kr, .kt { color: #d73a49; } // 关键字
  .s, .s1, .s2, .sb, .sc, .sd, .se, .sh, .si, .sx, .sr { color: #032f62; } // 字符串
  .m, .mf, .mh, .mi, .mo, .il { color: #005cc5; } // 数字
  .n { color: #24292e; } // 名称
  .na { color: #6f42c1; } // 属性名
  .nb { color: #005cc5; } // 内置
  .nc { color: #6f42c1; } // 类名
  .nf { color: #6f42c1; } // 函数名
  .nn { color: #6f42c1; } // 命名空间
  .no { color: #005cc5; } // 常量
  .nv, .vi, .vc, .vg { color: #e36209; } // 变量
  .o, .ow { color: #d73a49; } // 操作符
  .p { color: #24292e; } // 标点
  .err { color: #cb2431; } // 错误
}

// 深色模式颜色覆盖
[data-theme="dark"] .highlight {
  .c, .c1, .cm { color: #6a737d; }
  .k, .kd, .kn, .kp, .kr, .kt { color: #ff7b72; }
  .s, .s1, .s2, .sb, .sc, .sd, .se, .sh, .si, .sx, .sr { color: #a5d6ff; }
  .m, .mf, .mh, .mi, .mo, .il { color: #79c0ff; }
  .n { color: #c9d1d9; }
  .na { color: #d2a8ff; }
  .nb { color: #79c0ff; }
  .nc { color: #f0883e; }
  .nf { color: #d2a8ff; }
  .nn { color: #ff7b72; }
  .no { color: #79c0ff; }
  .nv, .vi, .vc, .vg { color: #ffa657; }
  .o, .ow { color: #ff7b72; }
  .p { color: #c9d1d9; }
  .err { color: #f85149; }
}

// 代码块语言标签
.highlight {
  position: relative;

  &[data-lang]::before {
    content: attr(data-lang);
    position: absolute;
    top: 0;
    right: 0;
    padding: $spacing-xs $spacing-sm;
    font-size: 12px;
    color: var(--text-secondary);
    background-color: var(--border-color);
    border-radius: 0 $border-radius-md 0 $border-radius-sm;
    text-transform: uppercase;
  }
}

// 代码块行号（可选）
.highlight .lineno {
  color: var(--text-secondary);
  padding-right: $spacing-md;
  border-right: 1px solid var(--border-color);
  margin-right: $spacing-md;
  user-select: none;
}
